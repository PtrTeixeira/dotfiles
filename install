#!/bin/bash
set -eo pipefail

if [ ! -x "$(command -v stow)" ] ; then
  echo 'You must install stow to use this'
  exit
fi

if [ ! -x "$(command -v antibody)" ] ; then
  echo 'You must install antibody to use this'
  exit
fi

if [ ! -d "$HOME/bin" ] ; then
  echo "Creating $HOME/bin directory"
fi

stow -v -t ~ --dotfiles git tmux vim zsh

if [ ! -f "$HOME/.zsh_plugins.sh" ] ; then
  antibody bundle < ~/.zsh_plugins > ~/.zsh_plugins.sh
else
  echo "$HOME/.zsh_plugins.sh already exists, will not overwrite"
fi
